  <style>
    :root {
      /* Base color palette */
      --color-green: #70AD47;
      --color-teal: #008080;
      --color-orange: #fa8e36;
      --color-yellow: #e4ac03;
      --color-black: #2a2a2a;
      --color-purple: #683e9b;
      --color-skyblue: #6bb3f6;
      --color-blue: #2e5688;
      --color-red: #c0514d;
      --color-magenta: #830083;
      
      /* Dark and Light variants */
      --color-green-dark: #548235;
      --color-green-light: #c3dbb8;
      --color-teal-dark: #003F3E;
      --color-teal-light: #8fc6c6;
      --color-orange-dark: #c06216;
      --color-orange-light: #fdeada;
      --color-yellow-dark: #7F6000;
      --color-yellow-light: #f4e7af;
      --color-black-dark: #000000;
      --color-black-light: #d9d9d9;
      --color-purple-dark: #352647;
      --color-purple-light: #eddbff;
      --color-skyblue-dark: #2665a0;
      --color-skyblue-light: #b8e0ff;
      --color-blue-dark: #1f3147;
      --color-blue-light: #dce6f2;
      --color-red-dark: #8c3736;
      --color-red-light: #f2dcdb;
      --color-magenta-dark: #490e49;
      --color-magenta-light: #f1d4e0;


      /* Domain-specific colors */
      --domain-net: var(--color-green);
      --domain-net-light: var(--color-green-light);
      --domain-iam: var(--color-teal);
      --domain-eng: var(--color-orange);
      --domain-ast: var(--color-yellow);
      --domain-rsk: var(--color-black);
      --domain-tst: var(--color-purple);
      --domain-sof: var(--color-skyblue);
      --domain-sof-light: var(--color-skyblue-light);
      --domain-ops: var(--color-red);
      --domain-ops: var(--color-red);
    }

    body {
      background: white;
      font-family: sans-serif;
      margin: 2vmax;
    }

    #roadmap {
      display: flex;
      flex-direction: column;
      gap: 2vmax;
    }

    .domain-container {
      background: white;
      border: 2px solid;
      border-radius: 0.4vmax;
      padding: 0.4vmax;
      display: grid;
      grid-template-rows: repeat(30, 1.5vmax);
      gap: 0.1vmax;

    }

    .domain-title {
      font-size: 1.1vmax;
      font-weight: 600;
      text-align: center;
      margin-bottom: 0.6vmax;
    }

    .subdomain-container {
      border: 2px solid;
      margin-bottom: 1vmax;
      padding: 0.3vmax;
      display: grid;
      grid-template-rows: repeat(27, 1.5vmax);  /* 27 fixed rows for skill strata */
      grid-auto-rows: 1.5vmax;
      gap: 0.1vmax;
    }

    .subdomain-title {
      font-size: 0.9vmax;
      font-weight: 500;
      margin-bottom: 0.3vmax;
    }

    .unspecialized-container {
      padding: 0.3vmax;
      display: grid;
      grid-template-rows: repeat(27, 1.5vmax);  /* 27 fixed rows for skill strata */
      grid-auto-rows: 1.5vmax;
      gap: 0.1vmax;
    }

    .cert-tile {
      width: 2.3vmax;
      height: 1.5vmax;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 0.65vmax;
      border-radius: 0.25vmax;
      background-color: inherit;  /* âœ… Inherit from parent */
      border: 2px solid;          /* âœ… Use inherited border-color */
      color: white;               /* âœ… Set text color explicitly */
      padding: 0.2vmax;
      box-sizing: border-box;
      margin: 0;
      text-decoration: none;
    }

    /* Domain-specific border and title coloring */
    .domain-NET     { border-color: var(--domain-net); }
    .domain-IAM     { border-color: var(--domain-iam); }
    .domain-ENG     { border-color: var(--domain-eng); }
    .domain-AST     { border-color: var(--domain-ast); }
    .domain-RSK     { border-color: var(--domain-rsk); }
    .domain-TST     { border-color: var(--domain-tst); }
    .domain-SOF     { border-color: var(--domain-sof); }
    .domain-OPS     { border-color: var(--domain-ops); }

    .domain-NET     .domain-title { color: var(--domain-net); }
    .domain-IAM     .domain-title { color: var(--domain-iam); }
    .domain-ENG     .domain-title { color: var(--domain-eng); }
    .domain-AST     .domain-title { color: var(--domain-ast); }
    .domain-RSK     .domain-title { color: var(--domain-rsk); }
    .domain-TST     .domain-title { color: var(--domain-tst); }
    .domain-SOF     .domain-title { color: var(--domain-sof); }
    .domain-OPS     .domain-title { color: var(--domain-ops); }

    /* Subdomain-specific accent coloring */
    .subdomain-OPS_penTesting,
    .subdomain-OPS_exploitation {
      background-color: var(--domain-ops-light);
    }

    .subdomain-OPS_forensics,
    .subdomain-OPS_incidentHandling {
      background-color: var(--domain-ops-blue-light);
    }

    .subdomain-RSK_grc {
      background-color: var(--domain-rsk-light);
    }

    .subdomain-ENG_cloudSysOps,
    .subdomain-ENG_nix,
    .subdomain-ENG_icsiot {
      background-color: var(--domain-eng-light);
    }
  </style>
</head>
<body>

  <h1>Security Certification Roadmap</h1>
  <div id="roadmap"></div>

  <script>
    async function loadJSON(path) {
      const res = await fetch(path);
      return res.json();
    }

    async function drawRoadmap() {
      const [domains, subdomains, unspecialized, certs] = await Promise.all([
        loadJSON('./data/domains.json'),
        loadJSON('./data/subdomains.json'),
        loadJSON('./data/unspecialized.json'),
        loadJSON('./data/certs.json'),
      ]);

      const roadmapEl = document.getElementById('roadmap');

      domains.forEach(domain => {
        const domainDiv = document.createElement('div');
        domainDiv.classList.add('domain-container', `domain-${domain.domainId}`);

        // ðŸ”§ Dynamically set how wide the domain container should be
        const allContainers = [
          ...subdomains.filter(sd => sd.domainId === domain.domainId),
          ...unspecialized.filter(u => u.domainId === domain.domainId)
        ];

        let maxColumn = 0;
        allContainers.forEach(c => {
          const endCol = c.gridColumnStart + c.gridColumnSpan - 1;
          if (endCol > maxColumn) maxColumn = endCol;
        });

        domainDiv.style.gridTemplateColumns = `repeat(${maxColumn}, 2.3vmax)`;

        const title = document.createElement('div');
        title.className = 'domain-title';
        title.textContent = domain.domainShortName;
        domainDiv.appendChild(title);

        const domainSubdomains = subdomains.filter(sd => sd.domainId === domain.domainId);
        domainSubdomains.forEach(sub => {
          const subDiv = document.createElement('div');
          subDiv.classList.add('subdomain-container', `subdomain-${sub.subdomainId}`);
          subDiv.style.gridTemplateColumns = `repeat(${sub.gridColumnSpan}, 2.3vmax)`;

          const subTitle = document.createElement('div');
          subTitle.className = 'subdomain-title';
          subTitle.textContent = sub.subdomainShortName;
          subDiv.appendChild(subTitle);

          const subCerts = certs.filter(cert => cert.subdomainId === sub.subdomainId);
          subCerts.forEach(cert => {
            subDiv.appendChild(makeCertTile(cert, domains));
          });

          domainDiv.appendChild(subDiv);
        });

        const unspecs = unspecialized.filter(u => u.domainId === domain.domainId);
        unspecs.forEach(u => {
          const unspecDiv = document.createElement('div');
          unspecDiv.classList.add('unspecialized-container', `domain-${u.domainId}`);
          unspecDiv.style.gridTemplateColumns = `repeat(${u.gridColumnSpan}, 2.3vmax)`;

          const unspecCerts = certs.filter(cert =>
            cert.domainId === u.domainId &&
            (!cert.subdomainId || cert.subdomainId === null)
          );

          unspecCerts.forEach(cert => {
            unspecDiv.appendChild(makeCertTile(cert, domains));
          });

          domainDiv.appendChild(unspecDiv);
        });

        roadmapEl.appendChild(domainDiv);
      });
    }

    function makeCertTile(cert, domains) {
      const tile = document.createElement('a');
      tile.href = cert.certUrl;
      tile.target = '_blank';
      tile.className = 'cert-tile';
      tile.textContent = cert.certTileLabel;
      tile.title = cert.certTooltip;
      tile.setAttribute('data-cert-id', cert.certId);
      tile.setAttribute('data-domain-id', cert.domainId);
      if (cert.subdomainId) {
        tile.setAttribute('data-subdomain-id', cert.subdomainId);
      }

      tile.style.gridRowStart = cert.certSkillStrata;

      // ðŸ§  Apply color logic from domain and optional teamRole
      const domain = domains.find(d => d.domainId === cert.domainId);
      const teamRoles = domain.teamRoles || {};
      const role = cert.teamRole || "DefaultTeam";

      if (teamRoles[role] && teamRoles[role].tileColor && teamRoles[role].borderColor) {
      tile.style.backgroundColor = `var(${teamRoles[role].tileColor})`;
      tile.style.borderColor = `var(${teamRoles[role].borderColor})`;
    } else {
      const domainIdLower = cert.domainId.toLowerCase();
      tile.style.backgroundColor = `var(--domain-${domainIdLower})`;
      tile.style.borderColor = `var(--domain-${domainIdLower}-dark)`;
    }

    tile.style.color = 'white'; // âœ… force white font

      return tile;
    }


    drawRoadmap();
  </script>